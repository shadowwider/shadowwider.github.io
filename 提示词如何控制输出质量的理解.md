# 提示词如何控制输出质量的理解
chatgpt已经出来1年多了，提示词工程也已经被大家玩烂了。但是为什么提示词可以控制输出答案的质量，又如何通过提示词获得更好的答案。笔者对于这个点有一点小小的顿悟。

不记得在哪看过一个大牛说的关于LLM回答的一句话就是“**大语言模型的推理就是根据提示词来计算回答中每个词的分布概率**”。虽然这句话乍一听大家都知道，但是细想一下就会有一些有趣的推论，有助于帮助我们去理解提示词乃至提高回答的质量。

为什么我的答案很空洞？这是普通用户使用chatgpt类工具时的一个最困扰的问题。如果我们从前面那句话来理解背后的本质原因就是**为什么我的提示词推理出来的回答概率分布都是低级简单的词概率高呢**？核心原因就是因为我们的提示词太low，和高级的那些词语句子链接太少，因此LLM推理的时候那些高级的词语出现的概率就会低。比如“如何学习编程？"，这样一个泛泛的问题在互联网中想想它会在哪里被看到，大多都是一些百度贴吧之类的网站，那里面的回答本来就是泛泛的。至于说什么"面向对象"、"时间复杂度"、"排序算法"这样和编程相关的高级词汇本来就不会在这种环境中出现，那你怎么可能指望chatgpt能够给出来让人眼前一亮的高质量回答呢？AI其实和我们人脑是很相似的，如果给你一个你朋友的名字作为提示词，让你从记忆中提取它的信息。你可能最开始也只有一个简单的画像。但是如果把你朋友的名字结合一个其他的重要事件的关键词比如“伴娘”，很可能你第一时间想到的回答就是这个朋友在一次婚礼上做伴娘出糗的经历了。之所有有这么大的差异就在于姓名+伴娘的组合关键词改变了**你从海量信息中提取记忆的分布概率**，从而使你回答出更有细节更加有价值的答案。

对于chatgpt也是类似，我们要想有更有深度不那么像AI的答案，就要找到并提供那些可以和高级回答相关的词语，诱导AI把高级语句的概率提高从而获得更有质量的回答分布。你要想的就是哪些高级的回答一般都会在什么地方出现，这个领域先进的专业的词汇又是哪些。当然我们不可能每个领域都知道，但是这个也可以直接问AI让它给出，先用在就好。比如我做了一个小小的实验如果直接问
> 如何学习编程

AI给出答案也比较泛，但是换成了
> （辅助关键词 ：冯诺依曼，苏格拉底, 并行计算）如何学习编程技能

AI在给回答的时候诸如链表、递归、封装、继承、这样的词语就多了一些，就是因为并行运算这类词语和高级的编程技巧词语的距离更近了，改变了它们出现的概率分布，因此回答看起来就不那么肤浅了。

想到这里笔者觉得在AI绘画领域其实提示词技术有一些是不是可以直接借鉴过来。我们在用SD做AI画图的时候其实有2种提示词，一种是自然语言的陈述句，另一种是标签词的组合。
>huge gothic industrial railway station, penn station, union station, realistic, ultra detailed artistic photography, zdzislaw beksinski, misty, ultra high-detail, soft sunlight, cinematic lighting, concept art, epic, surrealistic, magic, mystical

类似这样的。当然它描述的是图中想要的物体以及风格、光影等关键词。这种虽然对于绘图人的专业技术要求高些可实际上描述是相对简单的。而且AI在其中可以自由发挥的空间也更大，感觉也有可能抽中意想不到的盲盒。如果能把这种东西借鉴到chatgpt的提示词领域，也只要给出一些个关键词就能输出大段的创意无限的文本那应该会是一条和现有提示词工程不一样的发展路径吧。特别的是在SD的提示词其实对于词语的顺序是有建议的，比如先说整体构图，再说主要物体，再放次要物体最后再放艺术风格等等。那么chatgpt的提示词如果也用类似的层级架构去用一个个tag来写，是不是也会有奇效呢？虽然类似CoT，思维链等技术在chatgpt中研究的已经很深了，但是和SD一样的tag写法似乎还没有人提过，希望有人能研究一下看看。

---
*from claude3.5*

*您的观点非常有趣且富有洞察力。我来总结一下您的主要论点,并提供一些补充思考:*

*LLM推理的本质是根据提示词计算回答中每个词的分布概率。*
*低质量提示词会导致简单、泛泛的回答,因为它们与高级概念的关联性较弱。*
*提供更专业、具体的关键词可以提高相关高级概念出现的概率,从而产生更高质量的回答。*
*您提出了借鉴AI绘画领域提示词技术的想法,特别是使用标签组合的方式。*

*您的这些见解确实揭示了LLM工作原理的一些关键方面。关于将AI绘画的提示词技术应用到文本生成,这是一个非常创新的想法。虽然目前还没有广泛应用,但确实值得进一步探索。*
*补充几点思考:*

*层级结构: 您提到的SD提示词的层级结构确实可能对文本生成有帮助。例如,我们可以尝试按"主题-背景-细节-风格"的顺序组织关键词。*

***权重考虑: 在AI绘画中,某些提示词可以赋予不同的权重。在文本生成中,我们也许可以探索如何为不同的关键词或概念赋予不同的重要性。**
负面提示: SD中的负面提示概念也许可以应用到文本生成,用于明确指出我们不希望出现的内容或风格。*

*跨模态启发: 您的想法提醒我们,不同AI领域之间的技术交叉可能会带来意想不到的突破*

*平衡性考虑: 在应用这种方法时,需要注意保持提示的自然性和上下文连贯性,避免生成过于机械或不连贯的文本。*

*您的思路为提示工程开辟了一个新的研究方向。如果您想进一步探讨或实验这个想法,我建议可以:*

*设计一些实验,比较传统提示和基于标签的提示的效果差异。尝试不同的标签组织方式,看哪种更有效。
考虑如何将这种方法与现有的提示技术(如CoT)结合。这是一个很有潜力的研究方向,期待看到更多在这方面的探索和发现。*